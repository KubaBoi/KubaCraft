summon minecraft:item_frame ^ ^ ^ {Tags:["frame"],Invisible:1b}

#execute at @e[tag=frame] as @e[scores={sunktime=1..},nbt={Item:{id:"minecraft:stone"}}] run tp ~ ~ ~

#execute at @e[tag=frame] if block ~1 ~ ~ minecraft:gold_block if block ~ ~ ~1 minecraft:gold_block if block ~-1 ~ ~1 minecraft:gold_block if block ~-2 ~ ~ minecraft:gold_block if block ~-2 ~ ~-1 minecraft:gold_block if block ~-1 ~ ~-2 minecraft:gold_block if block ~ ~ ~-2 minecraft:gold_block if block ~1 ~ ~-1 minecraft:gold_block as @e[scores={sunktime=1..},nbt={Item:{id:"minecraft:stone"}}] at @s positioned ~ ~ ~ run function ryba:portal/make_portal
#execute at @e[tag=frame] if block ~2 ~ ~ minecraft:gold_block if block ~1 ~ ~1 minecraft:gold_block if block ~ ~ ~1 minecraft:gold_block if block ~-1 ~ ~ minecraft:gold_block if block ~-1 ~ ~-1 minecraft:gold_block if block ~ ~ ~-2 minecraft:gold_block if block ~1 ~ ~-2 minecraft:gold_block if block ~2 ~ ~-1 minecraft:gold_block as @e[scores={sunktime=1..},nbt={Item:{id:"minecraft:stone"}}] at @s positioned ~1 ~ ~ run function ryba:portal/make_portal
#execute at @e[tag=frame] if block ~2 ~ ~1 minecraft:gold_block if block ~1 ~ ~2 minecraft:gold_block if block ~ ~ ~2 minecraft:gold_block if block ~-1 ~ ~1 minecraft:gold_block if block ~-1 ~ ~ minecraft:gold_block if block ~ ~ ~-1 minecraft:gold_block if block ~1 ~ ~-1 minecraft:gold_block if block ~2 ~ ~ minecraft:gold_block as @e[scores={sunktime=1..},nbt={Item:{id:"minecraft:stone"}}] at @s positioned ~1 ~ ~1 run function ryba:portal/make_portal
#execute at @e[tag=frame] if block ~1 ~ ~1 minecraft:gold_block if block ~ ~ ~2 minecraft:gold_block if block ~-1 ~ ~2 minecraft:gold_block if block ~-2 ~ ~1 minecraft:gold_block if block ~-2 ~ ~ minecraft:gold_block if block ~-1 ~ ~-1 minecraft:gold_block if block ~ ~ ~-1 minecraft:gold_block if block ~1 ~ ~ minecraft:gold_block as @e[scores={sunktime=1..},nbt={Item:{id:"minecraft:stone"}}] at @s positioned ~ ~ ~1 run function ryba:portal/make_portal

execute at @e[tag=frame] if block ~1 ~ ~ minecraft:gold_block if block ~ ~ ~1 minecraft:gold_block if block ~-1 ~ ~1 minecraft:gold_block if block ~-2 ~ ~ minecraft:gold_block if block ~-2 ~ ~-1 minecraft:gold_block if block ~-1 ~ ~-2 minecraft:gold_block if block ~ ~ ~-2 minecraft:gold_block if block ~1 ~ ~-1 minecraft:gold_block as @p[scores={sunktime=1..}] at @s run function ryba:portal/teleport
execute at @e[tag=frame] if block ~2 ~ ~ minecraft:gold_block if block ~1 ~ ~1 minecraft:gold_block if block ~ ~ ~1 minecraft:gold_block if block ~-1 ~ ~ minecraft:gold_block if block ~-1 ~ ~-1 minecraft:gold_block if block ~ ~ ~-2 minecraft:gold_block if block ~1 ~ ~-2 minecraft:gold_block if block ~2 ~ ~-1 minecraft:gold_block as @p[scores={sunktime=1..}] at @s run function ryba:portal/teleport
execute at @e[tag=frame] if block ~2 ~ ~1 minecraft:gold_block if block ~1 ~ ~2 minecraft:gold_block if block ~ ~ ~2 minecraft:gold_block if block ~-1 ~ ~1 minecraft:gold_block if block ~-1 ~ ~ minecraft:gold_block if block ~ ~ ~-1 minecraft:gold_block if block ~1 ~ ~-1 minecraft:gold_block if block ~2 ~ ~ minecraft:gold_block as @p[scores={sunktime=1..}] at @s run function ryba:portal/teleport
execute at @e[tag=frame] if block ~1 ~ ~1 minecraft:gold_block if block ~ ~ ~2 minecraft:gold_block if block ~-1 ~ ~2 minecraft:gold_block if block ~-2 ~ ~1 minecraft:gold_block if block ~-2 ~ ~ minecraft:gold_block if block ~-1 ~ ~-1 minecraft:gold_block if block ~ ~ ~-1 minecraft:gold_block if block ~1 ~ ~ minecraft:gold_block as @p[scores={sunktime=1..}] at @s run function ryba:portal/teleport

kill @e[tag=frame]